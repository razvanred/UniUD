# Teoremi di ricorsione

## Primo Teorema di Ricorsione

**teorema** (primo teorema di ricorsione): Sia $t$ una ufnzione ricorsiva totale. Allora eiste $n\in\N$ tale che $\varphi_n=\varphi_{t(n)}$ (si comportano allo stesso modo su qualsiasi input)

È difficile da verificare questa proprietà perché gli input possibili sono infiniti, quindi non ho un modo semplice per dire che due programmi sono uguali.

Pensate di prendere un programma che prendi in input un programma e sputa in output un programma ottenuto trasformando il primo. Esiste un programma che dato in input a questo "trasformatore" restituisce un programma equivalente.

Sia $u$ l'indice di una generica MdT. definiamo la seguente funzione parziale:
* $\psi(u,x)=$
  * $\varphi_{\varphi_u(u)}(x)$ se $\varphi_u(u)\downarrow$
  * $\uparrow$ altrimenti

$\psi$ è calcolabile. Dunque, per il teorema SMN esiste una funzione ricorsiva totale $g$ tale che: $\psi(u,x)=\varphi_{g(u)}(x)$.
Sia $t4 uan funzione ricorsiva totale (quella dell'enunciato). Poiche la composizione di funzioni ricorsive è ricorsiva, $t\circ g$ è ricorsiva. quindi $t\circ g=\varphi_v$ per qualche $v$. PErtanto $(t\circ g)(v)=\varphi_v(v)$

Vista la genericità di $u$ sostituendo $u$ con $v$ nella definizione di $\psi(u,x)$ otteniamo:
* $\psi(v,x)=\varphi_{g(v)}(x)=$
  * $\varphi_{t(g(v))}(x)$ se $\varphi_v(v)\downarrow$
  * $\uparrow$ altrimenti

Poiché $t\circ g$ è totale, $\varphi_v(v)\downarrow$ sempre, e dunque $\varphi_{g(u)}(x)=\varphi_{t(g(v))}(x)$. Quindi con $n=g(v)$, abbiamo che $\varphi_n=\varphi_{t(n)}$

---

$\exists n\in\N:\forall x~\varphi_n(x)=n$

Definiamo: $\psi(a,b)=a$ è calcolabile.

Per il teorema SMN esiste $g$ r.t. tale che $\psi(a,b)=\varphi_{g(a)}(b)$

//TODO 35:00

---

$\exists n:W_n=\{0,1,2,3,...,n\}$

* $\psi(a,b)=$
  * $0$ se $b\leq a$
  * $\uparrow$ altrimenti

Per SMN... $g(a)$

$W_{g(a)}=\{0,1,2,3,4,...,a\}$

Per il 1° teorema di ricorsione esiste un $a$ per cui $\varphi_a=\varphi_{g(a)}$, per tale $a$, $W_a=\{0,1,2,3,4,...,a\}$

// TODO 37:00

---

//TODO

## Secondo Teorema di ricorsione

**teorema** (decondo teorema di ricorsione): Sia $f:\N^2\rightarrow\N$ una funzione ricorsiva totale. Allora esiste una funzione $v\N\rightarrow\N$ tale che:
$$\forall y\in\N~\varphi_{f(v(y),y)}=\varphi_{v(y)}$$

**dimostrazione**: Ricalca il primo teorema ma con un passaggio in più

## Teoremi di Rice (e Shapiro)

**definizione**: Una proprietà sulle MdT è una qualsiasi sottoinsieme di $\{\varphi_i\}_{i\in\N}$. Con abuso di notazione, intenderemo con proprietà qualsiasi sottoinsieme di $\N$, indendendo l'insieme costituito da indici di MdT

**definizione**: Sia dunque $\Pi$ una proprietà sulle MdT, $\Pi\subseteq\N$, $\Pi$ è estensionale (o chiusa per eguaglianza estensionale) se, per ogni $x,y,\in\N$, $(x\in\Pi\land\varphi_x=\varphi_y)\rightarrow y\in\Pi$

Intuitivamente, una proprietà è estensionale quando questa "parla" di cosa calcolano le MdT in essa contenute, e non di come queste sono fatte.

**lemma** (tecnica del Padding): $\forall i,k~\exists j:(\varphi_j=\varphi_i\land j>k)$

Se dato un generico programma di una proprietà, tutti i programmi equivalenti ottenuti con la tecnica del padding fanno parte della proprietà, allora è estensionale.

Se una proprietà è estensionale, o e $\emptyset$ o è infinita.

### Esempi (v\f)

* $\emptyset$ si
* $\{x:W_x=\emptyset\}$ si
* $\N$ si
* $\{x:W_x=\N\}$ si
* $\{x:x$ è un numero pari$\}$ no
* $\{x:W_x$ è l'insieme dei numeri pari$\}$ si
* $\{x:W_x=\{10\}\}$ si
* $\{x:W_x=\{2x\}\}$ no
* $\{pair(x,y):W_x\subseteq W_y\}$ no ($pair(x,y)$ non è un indice di MdT)

Si nota a colpo d'occhio quando la proprietà è basata sul valore dell'indice del progamma.

---

**teorema** (di Rice): Sia $\Pi$ una proprietà estensionale. $\Pi$ è ricorsiva sse è banale (ovvero $\Pi=\emptyset$ o $\Pi=\N$).

In pratica, non esiste un modo automatico per verificare che un programma faccià quello che vogliamo che faccia. Ci sono delle tecniche formali per dimostrare la correttezza, ma non sono automatiche, devono essere portate avanti da un umano.

**dimostrazione $(\leftarrow)$**:
* $\emptyset$ è ricorsivo banale
* $\N$ è ricorsivo banale

**dimostrazione $(\rightarrow)$**: Sia $\Pi$ ricorsivo e $g$ la sua funzione caratteristica

* $g(x)=$
  * $1$ se $x\in\Pi$
  * $0$ se $x\notin\Pi$

Supponiamo per assurdo che $\Pi$ non sia banale. Allora esistono $a,b\in\N$ tali che $a\in\Pi$ e $b\notin\Pi$. Definiamo la funzione

* $h(x)=$
  * $b$ se $g(x)=1$
  * $a$ se $g(x)=0$

Essendo $g$ ricorsiva per ipotesi, $h$ è ricorsiva totale. Per il teorema di ricorsione di Kleene esiste $n_0$ tale che $\varphi_{n_0}=\varphi_{h(n_0)}$. Da questo deriviamo l'assurdo:
* Se $n_0\in\Pi$ allora essendo $\Pi$ estensionale $h(n_0)\in\Pi$. Ma è assurdo poiché $h(n_0)=b$
* Se $n_0\notin\Pi$ allora essendo $\Pi$ estensionale $h(n_0)\notin\Pi$. Ma è assurdo poiché $h(n_0)=a$

Quindi $\Pi$ non può essere ricorsivo e non banale.

Possiamo usare questo teorema per sapere a colpo d'occhio che una proprietà non è ricorsiva vedendo che è estensiva e non banale.

---

**teorema** (di Rice e Shapiro): Sia $\Pi$ una proprietà estensionale. Se $\Pi$ è r.e. allora, per ogni $i\in\N$, $i\in\Pi$ sse $\exists j\in\Pi:\varphi_j\subseteq\varphi_j\land W_j$ è finito ($\phi$)

In pratica avendo una proprietà estensionale r.e. ($\Pi$). Allora, per ogni numero naturale, questo appartiene alla proprietà se e solo se esiste nella proprietà una sottofunzione di $\varphi_i$ (vediamo una funzione come un insieme di coppie, una sottofunzione è un sottoinsieme di questo insieme di coppie) e il range di questa funzione è finito.

**dimostrazione**: Assumiamo che $\Pi$ sia estensionale ed r.e.:

**dimostrazione ($\Rightarrow$)**: Sia $i\in\Pi$. Se $W_i$ è finito si prenda $j=i$. Supponiamo $i\in\Pi$, $W_i$ infinito, ma $j\notin\Pi$ quando $\varphi_j\subseteq\varphi_i$ e $W_j$ è finito. Sia $g$ la seguente funzione:

* $g(z,t)=$
  * $\varphi_i(t)$ se $M_z(z)$ non termina in $\leq t$ passi
  * $\uparrow$ altrimenti

La terminazione di $M_z(z)$ in un numero stabilito di passi è decidibile. E se $\varphi_i(t)$ è indefinito ricade nell'altro caso.

Per il teorema SMN... $g(z,t)=\varphi_{s(z)}(t)$. Si osservi che $\varphi_{s(z)}\subseteq\varphi_i$ per definizione:
* $z\in K$ implica che $W_{s(z)}$ è finito e $\varphi_{s(z)}\subseteq\varphi_i$. Per ipotesi $s(z)\notin\Pi$
* $z\notin K$ implica che $\varphi_{s(z)}=\varphi_i$. Pertanto $s(z)\in\Pi$

Dunque saper decidere l'appartenenza a $\Pi$ implicherebbe saper decidere l'appartenenza a $\overline K$ che è assurdo.

**dimostrazione ($\Leftarrow$)**: Supponiamo per assurdo che esista $i\in\N$ tale che $\varphi_j\subseteq\varphi_i$ e $W_j$ è finito, $j\in\Pi$ e $i\notin\Pi$. Sia $g$ la funzione seguente:

* $g(z,t)=$
  * $\varphi_i(t)$ se $t\in W_j$ oppure $z\in K$
  * $\uparrow$ altrimenti

È calcolabile usando l'esecuzione in parallelo dell'appartenenza a $W_j$ e $K$. Se $\varphi_i(t)$ è indefinito ricado nell'else

Per il teorema SMN... $g(z,t)=\varphi_{s(z)}(t)$. Quindi:
* $z\in K$ implica che $\varphi_{s(z)}=\varphi_i$. Per l'ipotesi su $i$, e l'estensionalità di $\Pi$, $s(z)\notin\Pi$
* $z\notin k$ implica che $\varphi_{s(z)}|W_j=\varphi_i$. Dunque $s(z)$ è estensionalmente equivalente a $\varphi_j$ e pertanto $s(z)\in\Pi$

Come nel caso precedente l'appartenenza a $\Pi$ implicherebbe l'appartenenza a $\overline K$ che non è r.e., quindi è assurdo.

Dunque se $\Pi$ è estenzionale ed esiste $i$ per cui $\phi$ è falso. Allora non è r.e.

### Esempi

#### 1

$A=\{x:\varphi_x$ è totale $\}$. Se $A$ fosse r.e. esisterebbe una funzione in $A$ con dominio finito, ma così non sarebbe sicuramente totale e quindi non potrebbe appartenere ad $A$

#### 2

//TODO 1:05:00

#### 3

$C=\{x:|W_x|=5\}$. 
Considero $i$ indice della funzione $0$. 
E sia di $j$ la funzione che restituisce $0$ se l'input è $<5$, indefinita per altri input; tale funzione è calcolabile ed ha dominio $|0,...,4|=5$. $j$ appartiene a $C$ ed è sottofunzione di dominio finito della funzione $i$. 
Quindi $i$ dovrebbe appartenere a $C$ se fosse r.e., ma non appartiene perché ha dominio infinito. Quindi non può essere r.e.

## Insiemi creativi e produttivi

//TODO 1:25:00

**definizione**: Un insieme $A\subseteq\N$ di dice *produttivo* se esiste una funzione totale ricorsiva $f$ detta funzione produttiva di $A$ tale che: 
$$\forall x\in\N(W_x\subseteq A\Rightarrow f(x)\in A\setminus W_x)$$

$A$ produttivo $\Rightarrow$ $A$ non r.e.

**teorema**: $A$ produttivo e $A\preceq B$ $\Rightarrow$ $B$ produttivo

Sia $A$ produttivo e tale che $A\preceq B$ via $f$. Sia $h$ la funzione produttiva di $A$. Nella dimostrazione useremo $f^{-1}(x)=\{x:f(x)\in X\}$. È immediato veridicare che è monotona ovvero: $X\subseteq Y\Rightarrow f^{-1}(x)\subseteq f^{-1}(y)$

$f$ è ricorsiva, dunque esiste una funzione parziale ricorsiva tale che:

* $\psi(x,y)=$
  * $1$ se $f(y)\in W_x$
  * $\uparrow$ altrimenti

Per il teorema SMN... $\psi(x,y)=\varphi_{g(x)}(y)$. Inoltre, per definizione di $\psi$, fissato $x\in\N$ $W_{g(x)}=f^{-1}(W_x)$

//TODO
