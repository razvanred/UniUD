# Grammatica CF (context free)

Una grammatica libera dal contesto (cf) è una quadrupla $G=\langle V, T, P, S\rangle$, tale che
* $V$ è un'insieme finito di variabili (simboli *non terminali*, che possono essere riscritti)
* $T$ è un'insieme finito di simboli *terminali*, che non possono essere descritti ($V\cap T=\emptyset$)
* $P$ è un insieme finito di regole di riscrittura dette *produzioni*; ogni produzione è della forma $A\rightarrow\alpha$ (oppure come la coppia $\langle A,\alpha\rangle\in V\times(V\cup T)$) in cui
  * $A\in V$ è una variabile
  * $\alpha\in(V\cup T)^*$ 
* $S$ è una variabile speciale detta *simbolo iniziale*

#### Esempio

Grammatica che genera espressioni booleane

$G=\langle\{E\},\{or,and,not,(,),0,1\},P,E\rangle$
* $P$:
  * $E\rightarrow0$
  * $E\rightarrow1$
  * $E\rightarrow(EorE)$
  * $E\rightarrow(EandE)$
  * $E\rightarrow(notE)$

Libera dal contesto significa che per ogni $E$ che trovo nella stringa posso applicare qualunque delle regole in $P$ indipendentemente dal contesto in cui si trova (in genere i linguaggi di programmazione non sono liberi, ad esempio quello che posso e non posso scrivere in una riga può dipendere da come è stata dichiarata in precedenza una variabile)

---

Data $G=\langle V, T, P, S\rangle$, definiremo le relazioni $\Rightarrow^g,\Rightarrow^g_i,\Rightarrow^g_*\subseteq(V\cup T)^*\times(V\cup T)^*$ nel seguente modo:
* Se $A\rightarrow\beta\in P$ e $\alpha,\gamma\in(V\cup T)^*$, allora $\alpha A\gamma\Rightarrow^G\alpha\beta\gamma$
* Se $\alpha_1,...,\alpha_i\in(V\cup T)^*,i\geq1$ e $\bigwedge\limits^{i-1}_{k=1}\alpha_j\Rightarrow^G\alpha_{j+1}$, allora $\alpha_1\Rightarrow^G_i\alpha_m$. In questo caso diremo che da $\alpha_1$ deriva $\alpha_m$ in $i$ passi. Per ogni $\alpha$, diremo anche che $\alpha\Rightarrow^G_0\alpha$
* Se esiste $i$ tale per cui $\alpha\Rightarrow^G_i\beta$, allora $\alpha\Rightarrow^G_*\beta$. Diremo quindi che da $\alpha$ deriva $\beta$

## Linguaggio generato

Il *linguaggio generato da $G$* è: $L(G)=\{w\in T^*:S\Rightarrow^g_*w\}$

L è un linguaggio libero dal contesto se esiste una grammatica CF tale che $L=L(G)$. Due grammatiche $G_1$ e $G_2$sono equivalenti sse $L(G_1)=L(G_2)$

I linguaggi liberi dal contesto non sono linguaggi regolari: è possibile generare con una grammatica libera dal contesto linguaggi che non sono generabili da un DFA (es: $L=\{0^n1^n=n\in\N\}$); non è detto che tutti i linguaggi regolari siano liberi dal contesto (è così, lo vedremo più avanti).

## Alberi di derivazione

Sia $G=\langle V, T, P, S\rangle$ una grammatica CF. Un albero è un *albero di derivazione* (parse tree) per $G$ se:
1. per ogni vertice ha una etichetta presa presa tra $V\cup T\cup\{\varepsilon\}$
2. l'etichetta della radice appartiene a $V$
3. ogni vertice interno ha etichetta appartenente a $V$
4. se un vertice $n$ è etichettato con $A$ e $n_1,...n_k$ sono (in ordine) i vertici figli di $A$ etichettati con $X_1,...,X_k$ allora $A\rightarrow X_1...X_k\in P$
5. se un vertice $n$ ha etichetta $\varepsilon$, allora $n$ è uan foglia ed è l'unico figlio di suo padre

Diremo che un albero descrive uan stringa $\alpha\in(V\cup T)^*$ se $\alpha$ è proprio la stringa che possiamo leggere dalle etichette delle foglie da sinistra a destra

**teorema**: Sia $G=\langle V, T, P, S\rangle$ una grammatica CF. Allora $S\Rightarrow^G_*\alpha$ se e solo se esiste un albero di derivazione con radice etichettata $S$ per $G$ che descrive $\alpha$

Una grammatica CF tale per cui esiste una parola con più di un albero di derivazione con radice etichettata $S$ è detta ambigua

Esistono dei linguaggi CF *inerentemente ambigui* per cui non esistono grammatiche CF non ambigue (es: $L=\{a^nb^nc^md^m:n\geq1,m\geq1\}\cup\{a^nb^mc^md^n:n\geq1,m\geq1\}$)