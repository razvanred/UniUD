# Il DFA minimo

In questo episodio di Fondamenti!: La nostra lezione atraverserà un'estenuante serie di sfide all'ultimo respiro in cerca del DFA minimo! Riuscirà il nostro eroe a dimostrarne l'esistenza? Riuscira ad identificare e *catturare* l'automa? Tutto questo... a Fondamenti. [generic guitar chord]

## Prima fase: Studiare l'avversario

### Relazioni di Equivalenza

$R\subseteq S\times S$ è una relazione di equivalenza se è:
* **riflessiva** $xRx,\forall x\in S$
* **simmetrica** $xRy\Rightarrow yRx,\forall x,y\in S$
* **transitiva** $xRy\land yRz\Rightarrow xRz,\forall x,y,z\in S$

### Partizioni

Una famiglia di insiemi $B_1,B_2,B_3,...$ è una partizione di $S$ se:
1. $B_i\subseteq S,\forall i$
2. $B_i\neq\emptyset,\forall i$
3. $B_i\cap B_j=\emptyset,\forall i,j:i\neq j$
4. $B_1\cup B_2\cup...=S$

Una relazione di equivalenza $R\subseteq S\times S$ induce (univocamente, a meno di rinomina degli indici) una partizione $P_S=\{B_1,B_2,B_3,...\}$ ove:
1. $\forall i(\forall a,b\in B_i)aRb$
2. $\forall i,j:i\neq j,(\forall a\in B_i)(\forall b\in B_j)\neg(aRb)$

Le varie $B_i$ sono dette classi di equivalenza. Se $a\in B_i$ allora la con la notazione $[a]_R$ (o semplicemente $[a]$ quando il contesto è chiaro) is denota la classe $B_i$. Se $S$ è partizionato da $R$ in un numero finito di classi $S_1\cup S_2\cup...\cup S_k$ allora $R$ si dice di **indice finito** ($k$) su $S$

Viceversa, una partizione $P_S$ identifica una unica relazione di equivalenza su $S$

### Raffinamento

Date due relazioni di qeuivalenza $R_1$ e $R_2$ sullo stesso insieme $S$, $R_1$ è un *raffinamento* di $R_2$ se ogni classe di equivlaenza della partizione indotta da $R_1$ è sottoinsieme di qualche classe di equivalenza della partizione indotta da $R_2$. Si dice anche che $R_2$ è più **grossolana** (coarser) di $R_1$ o che $R_1$ è più **raffinata** (finer) di $R_2$.

La più raffinata di tutte (finsest) è la relazione in cui ogni elemento dell'insieme è equivalente *solo* a se stesso. La più grossolana (coarsest), invece, è la relazione in cui ogni elemento è equivalente a tutti gli altri.

### Partizioni di $\Sigma^*$

Se $M=\langle Q, \Sigma, \delta, q_0, F\rangle$ è un DFA, gli associamo la relazione $R_M\subseteq\Sigma^*\times\Sigma^*$ definita come: 

$xR_My\Leftrightarrow\hat\delta(q_0,x)=\hat\delta(q_0,y)$

definiamo $L_q=\{x\in\Sigma^*:\hat\delta(q_0,x)=q\}$ il linguaggio associato allo stato $q$ dell'automa. Le classi di equivalenza di $R_M$ sono esattamente i linguaggi associati ad ogni stato dellautoma M.

### La relazione $R_L$

Dato un linguaggio $L\subseteq\Sigma^*$, gli associamo $R_L\subseteq\Sigma*\times\Sigma^*$ definita come:

$xR_Ly\Leftrightarrow(\forall z\in\Sigma^*)(xz\in L\leftrightarrow yz\in L)$

$x$ è in relazione con $y$ se e solo se qualsiasi stringa concateno ad $x$ ed $y$ o sono entrambe appartenenti al linguaggio, o non lo è nessuna delle due

### Invarianza a destra

Una relazione $R_L\subseteq\Sigma*\times\Sigma^*$ che gode della proprietà: 

$xRy\Rightarrow(\forall z\in\Sigma^*)(xzRyz)$

si dice **invariante a destra** (rispetto alla concatenazione)

## Seconda fase: Le sfide

### Teorema Myhill-Nerode

I seguenti enunciati sono equivalenti:
1. $L\subseteq\Sigma^*$ è accettato da un qualche DFA
2. $L$ è l'unione di classi di equivalenza di $\Sigma^*$ indotte da una relazione invariante a destra di indice finito
3. $R_L$ è di indice finito

#### $(1)\rightarrow(2)$

Sia $L$ accettato da un DFA $M=\langle Q, \Sigma, \delta, q_0, F\rangle$. Mostreremo che $R_M$ è la relazione che soddisfa il punto (2). Per definizione di linguaggio riconosciuto da un automa:

$L=\bigcup\limits_{q\in F}\{x\in\Sigma^*:\hat\delta(q_0,x)=q\}$

$R_M$ è invariante a destra, dunque i vari insiemi $L_q=\{x\in\Sigma^*:\hat\delta(q_0,x)=q\}$ costituiscono classi di equivalenza della partizione indotta da $R_M$

#### $(2)\rightarrow(3)$

Mostreremo che ogni relazione di equivalenza $R$ che soddisfa (2) è un raffinamento di $R_L$.

Sia $x\in\Sigma^*$, vogliamo mostrare che $[x]_R\subseteq[r]_{R_L}$. Sia $y\in[x]_R$, Poiché $R$ è invariante a destra per ipotesi, allora $xzRyz,\forall z\in\Sigma^*$.

Poiché $L$ è unione di classi di equivalenza di $R$, ciò implica che ogni qualvolra $vRw$ si ha che $v\in L\leftrightarrow w\in L$. Pertanto $\forall z\in\Sigma^*,vz\in L\leftrightarrow wz\in L$

Allora $xR_Ly$ per definizione, dunque $y\in[x]_{R_L}$. L'indice di $R_L$ è minore di quello di $R$, che per ipotesi è finito

#### $(3)\rightarrow(1)$

Si costruisce un DFA $M'=\langle Q', \Sigma', \delta', q_0', F'\rangle$ che riconosce $L$. Sia
* $Q'$ l'insieme (finito per ipotesi) di classi di equivalenza di $R_L$
* $\Sigma'$ Lo stesso di $L$
* $\delta'([x],a)=[xa]$ (la definizione ha senso indipendentemente dalla scelta di $x$ in quanto $R_L$ è invariante a destra)
* $q_0'=[\varepsilon]$
* $F'=\{[x]:x\in L\}$

Mostriamo che $L(M')=L$. Si verifica per induzione du $|y|\geq0$ che $\hat\delta'([x],y)=[xy]$. Pertanto si ha che $\hat\delta'(q_0',x)=\hat\delta'([\varepsilon],x)=[\varepsilon x]=[x]$ e dunque $x\in L(M')\Leftrightarrow\hat\delta'(q_0',x)\in F'\Leftrightarrow[x]\in F'\Leftrightarrow x\in L$

## L'ambito premio