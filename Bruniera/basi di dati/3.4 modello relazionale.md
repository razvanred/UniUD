# Modello Relazionale

È un modello basato sui record (quindi in prima forma normale). È più astratto di modelli reticolare e gerarchico, ma meno del modello ER. Ha una caratterizzazione formale elegante e utilizza strutture dati semplici ed uniformi

Presenta linguaggi di definizione, aggiornamento ed interrogazione. I linguaggi di interrogazione possono essere procedurali eo dichiarativi.

Costrutti fondamentali:
* Relazione / tabella
* Tupla / riga
* Attributo / colonna
* Dominio (associato alla colonna)

## Dominio

È un insieme di valori **atomici**. Questo esclude gli attributi composti, devon essere separati. Vale lo stesso discorso sul valore NULL fatto per gli ER (le chiavi non possono essere NULL).
Possono essere definiti, anche globalmente, non per tabella, oppure si possono usare quelli predefiniti.

## Attributo

Può avere o meno nome (se non lo ha si usa la sua posizione). Cosa comporta?
* L'ordine degli attributi conta quando non hanno nome, è più flessibile assegnare un nome
* Il nome deve essere unico per la tabella, ma non tra tabelle diverse
  * Quando fondo le tabelle devo poter rinominare per evitare collisioni o per permettere il join naturale

Ha un dominio. $dom(a)$ indica il dominio dell'attributo a.

È definito solo localmente.

## Relazione

Ha un nome, uno schema ed un istanza.
Il nome deve esseredefinito globalmente

//TODO

## Vincoli intra-relazionali

* Vincoli relativi ad un singolo valore di una singola tupla
  * Vincolo di dominio
  * Vincolo NOT NULL
* Vincoli che coinvolgono più valori di una tupla
  * Esempio: l'attributo "lode" può essere il booleano true solo se l'attributo "voto" è 30
* Vincoli che coinvolgono più tuple
  * Vincolo di unicità
  * Vincolo di chiave (unica e NOT NULL)

## Vincoli inter-relazionali

 È un vincolo che riguarda due tabelle (non necessariamente diverse).

 Un insieme di attributi $FK$ di uno schema di relazione $R_1$ è chiave esterna dispetto ad uno schema $R_2$ se:
 * Fli attributi di $FK$ hanno lo stesso dominio degli attributi che compongono la chiave primaria $PK$ di $R_2$ (in verità è sufficiente che soddisfino il vincolo di unicità)
 * Date $r_1\in R_1$ e $r_2\in R_2$. Per ogni $t_1\in r_1$ se $t_1[FK]\neq NULL$ (nessun attributo di $FK$ $t_1$ assume NULL) allora esiste $t_2\in r_2$ tale che $t_1[FK]=t_2[PK]$

//TODO

## Esempio

| Impiegato | nome | iniziale | cognome | cf | data_nascita | indirizzo | sesso | stipendio | dip |
| --------- | ---- | -------- | ------- | -- | ------------ | --------- | ----- | --------- | --- |

| Dipartimento | *dnumero* | dnome | manager | data_inizio |
| ------------ | --------- | ----- | ------- | ----------- |

| sedi_dipartimento | *dnumero* | *dsede* |
| ----------------- | --------- | ------- |

| progetto | *pnumero* | pnome | dnum | dsede |
| -------- | --------- | ----- | ---- | ----- |

| lavora_a | *imp* | *progetto* | ore_settimana |
| -------- | ----- | ---------- | ------------- |

| persona_a_carico | *imp* | *nome* | sesso | data_nascita | legame |
| ---------------- | ----- | ------ | ----- | ------------ | ------ |

//TODO