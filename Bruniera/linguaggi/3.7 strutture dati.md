# Strutture di dati

Tipo di dato:
* Insieme di operazioni che ha senso fare su un dato
* Collezione di possibili valori che può avere un dato

A cosa servono i tipi?
* Livello di progetto: Organizzare a livello concettuale i dati
  * Separano i dati in categorie
  * Fungono da "commenti formali"
* Livello di programma: Identificano e prevengono gli errori
  * Impediscono che su un dato si facciano operazioni che non hanno senso su quel tipo
  * I dati sono usati in modo coerente al loro tipo
* Livello di implementazione: Determinano come allocare i dati in memoria

## Sistema di tipi

Per sistema di tipi si intendoe il modo in cui un particolare linguaggio gestisce le definizioni, le caratteristiche ed i controlli dei tipi.

Caratteristiche del sistema di tipi di un linguaggio:
* Tipi predefiniti (e primitivi)
* Meccanismi per definire nuovi tipi
* Meccanismi relativi al controllo di tipi
  * Equivaleza (tra tipi, non tra valori)
  * Compatibilità
  * Infernza

I sistemi di tipo possono essere statici o dinamici:
* Statici: gran parte dei controlli vangono fatti a compiletime
  * C, Java, Rust
* Dinamici: gran parte dei controlli di tipo venogno fatti a runtime
  * Python, JS, Scheme

La separazione non è netta, quasi tutti i linguaggi fanno alcuni controlli statici ed alcuni dinamici. Non tutti, alcuni sono più "puri" ed usano solo un tipo di meccanismo.

### Statici vs Dinamici

Vantaggi degli statici:
* Anticipano molti errori
* Diminuiscono il carico di lavoro del programma

Svantaggi svantaggi degli statici:
* Possono essere più prolissi, bisogna aggiungere più informazioni sui tipi nel codice
* Meno flessibili, a volte impediscono codice lecito per maggiore sicurezza, perché il compilatore non può prevedere al 100% il comportamento del programmma

Esempio:
```scheme
(define (f g) (cons (g 7) (g #t)))
(define pair_of_pairs (f (lambda (x) (cons x x))))
```

Scheme ha un sistema di tipi completamente dinamico, questi codice è perfettamente valido e si comporta in modo corretto, tuttavia un linguaggio statico non permetterebbe mai un codice con questo livello di polimorfismo.
Si può scrivere codice equivalente, ma con maggiore complessità.

### Forti vs Deboli

I sistemi di tipi forti impediscono che errori di tipo non vengano rilevati, sono typesafe.
I sistemi deboli permettono maggiore flessibilità, ma perdono sicurezza, permettendo operazioni che non dovrebbero avere senso dal punto di vista dei tipi.

I sistemi di tipi si classifiano "ortogonalmente" in base a quanto sono:
* Statici/Dinamici
* Forti/Deboli
